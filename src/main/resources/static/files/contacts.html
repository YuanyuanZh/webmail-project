<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Contacts - Web Mail</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <!-- bootstrap 3.0.2 -->
    <link href="/resources/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!--  -->
    <link href="/resources/css/bootstrap.progress-auto.css" rel="stylesheet" type="text/css" />
    <!-- font Awesome -->
    <link href="/resources/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <!-- Ionicons -->
    <!--<link href="/resources/css/ionicons.min.css" rel="stylesheet" type="text/css" />-->
    <!-- bootstrap wysihtml5 - text editor -->
    <!--<link href="/resources/css/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css" rel="stylesheet" type="text/css" />-->
    <!-- iCheck for checkboxes and radio inputs -->
    <!--<link href="/resources/css/iCheck/minimal/blue.css" rel="stylesheet" type="text/css" />-->
    <!-- Theme style -->
    <link href="/resources/css/mail.css" rel="stylesheet" type="text/css" />

    <link href="/resources/css/mail-resp.css" rel="stylesheet" type="text/css" />

    <link href="/resources/css/contacts.css" rel="stylesheet" type="text/css" />

    <!-- favicon from https://dribbble.com/shots/1297277-Adline-Social-icons-Retouched?list=searches&tag=mail_icon&offset=11 -->
    <link rel="shortcut icon" href="/resources/img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/resources/img/favicon.ico" type="image/x-icon">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>
<body class="">


<!-- <div class="header">
  <img  class="" width="120" height="30" src="/resources/img/webmail-logo.png" />

  <button class="btn btn-primary btn-sm pull-right" onclick="location.href='/login.html'">Login</button>
</div> -->

<div class="wrapper">
<aside class="left-side x-col">
    <div id="profile" class="profile column-header">
        <img src="/resources/img/avatar/avatar_2x.png" height="40" width="40" class="profile-avatar img-circle img-thumbnail" alt="Avatar" />
        <span class="profile-name">Hello,</span>

        <div class="profile-dropdown dropdown" >
            <span class="glyphicon glyphicon-collapse-down dropdown-trigger" data-toggle="dropdown"></span>

            <ul class="dropdown-menu" role="menu">
                <li><a href="#">Foo</a></li>
                <li><a href="#">Bar</a></li>
            </ul>
        </div>
    </div>

    <div class="left-side-tabs">
        <ul class="nav nav-tabs nav-justified">
            <li role="presentation"><a href="/">Mail</a></li>
            <li role="presentation" class="active"><a href="#">Contacts</a></li>
        </ul>
    </div>

    <div style="padding: 1.4em 1em;">
        <button class="btn btn-primary btn-block compose-btn"><i class="fa fa-plus"></i>&nbsp;&nbsp; New</button>
    </div>

    <div style="padding: 0;">
        <ul class="nav nav-stacked mail-menu">
            <li class="active"><a href="#"><i class="fa fa-inbox"></i> <span>All Contacts</span>
                <!--<small class="badge pull-right bg-green">192</small>-->
            </a></li>
            <li><a href="#"><i class="fa fa-star-o"></i> <span>Starred</span></a></li>
        </ul>

        <!-- <h5 class="h5">TAGS</h5> -->
    </div>

    <div class="toolbar toolbar-bottom">
        <div class="btn-group" style="position: absolute; bottom: 1.4em; left: 50%; margin-left: -34px;">
            <button class="btn btn-default"><i class="fa fa-power-off"></i></button>
            <button class="btn btn-default"><i class="fa fa-cog"></i></button>
        </div>
    </div>

</aside>

<!-- Mail list -->
<aside id="maillist" class="second-left-side x-col">

    <div class="column-header">
        <div class="search-box pull-right">
            <input placeholder="Search Contact..." type="text" />
            <span class="search-icon"><i class="fa fa-search"></i></span>
        </div>

        <h2 class="folder-name">All</h2>
    </div>

    <header class="toolbar">
        <div class="btn-group">
            <!-- <button class="btn btn-default"><i class="fa fa-refresh"></i></button> -->
            <button class="btn btn-default refresh-btn btn-sm"><i class="fa fa-refresh"></i></button>
        </div>
        <div class="btn-group">
            <button type="button" class="btn btn-default btn-sm"><i class="fa fa-archive"></i></button>
            <button type="button" class="btn btn-default btn-sm"><i class="fa fa-info-circle"></i></button>
            <button type="button" class="btn btn-default btn-sm"><i class="fa fa-trash"></i></button>
        </div>

        <div class="btn-group">
            <button type="button" class="btn btn-default btn-sm"><i class="fa fa-folder"></i></button>
            <button type="button" class="btn btn-default btn-sm"><i class="fa fa-tag"></i></button>
        </div>

        <div class="toolbar-right">
            <small>1-100 of 1024</small>
            <br/>
            <i class="fa fa-chevron-left"></i>&nbsp;&nbsp;&nbsp;
            <i class="fa fa-chevron-right"></i>

            <!-- <div class="btn-group">
              <button type="button" class="btn btn-default"><i class="fa fa-chevron-left"></i></button>
              <button type="button" class="btn btn-default"><i class="fa fa-chevron-right"></i></button>
            </div> -->

        </div>
    </header>

    <div id="maillistWrapper" data-layout="fill-parent">
        <!-- <div class="toolbar-placeholder"></div> -->
        <dl class="contact-list">

            <dd class="contact-list-item">
                <div class="avatar">
                    <img class="" width=50 height=50 src="/resources/img/avatar/tom.png" />
                </div>
                <div class="info">
                    <p><strong>Tom Hanks</strong></p>
                    <p><i class="fa fa-mobile"></i> (646) 861-2268
                        <span class="space"></span><i class="fa fa-envelope-o"></i> tomhanks@yahoo.com</p>
                    <p><i class="fa fa-location-arrow"></i> 338 West 23th Street New York, NY 10011, USA</p>
                </div>
                <div class="actions">
                    <i class="fa fa-star-o"></i>
                </div>
            </dd>

            <dd class="contact-list-item">
                <div class="avatar">
                    <img class="" width=50 height=50 src="/resources/img/avatar/tomcruise.png" />
                </div>
                <div class="info">
                    <p><strong>Tom Cruise</strong></p>
                    <p><i class="fa fa-mobile"></i> (646) 861-2268
                        <span class="space"></span>
                        <i class="fa fa-envelope-o"></i> cruise@aixmail.com</p>
                    <p><i class="fa fa-location-arrow"></i> 338 West 23th Street New York, NY 10011, USA</p>
                </div>
                <div class="actions">
                    <i class="fa fa-star-o"></i>
                </div>
            </dd>

            <dd class="contact-list-item active">
                <div class="avatar">
                    <img class="" width=50 height=50 src="/resources/img/avatar/beyonce.png" />
                </div>
                <div class="info">
                    <p><strong>Beyoncé Gisselle Knowles</strong></p>
                    <p><i class="fa fa-mobile"></i> (646) 861-2268
                        <span class="space"></span>
                        <i class="fa fa-envelope-o"></i> beyonce@aixmail.com</p>
                    <p><i class="fa fa-location-arrow"></i> 338 West 23th Street New York, NY 10011, USA</p>
                </div>
                <div class="actions">
                    <i class="fa fa-star"></i>
                </div>
            </dd>

            <dd class="contact-list-item">
                <div class="avatar">
                    <img class="" width=50 height=50 src="/resources/img/avatar/freeman.png" />
                </div>
                <div class="info">
                    <p><strong>Morgan Freeman</strong></p>
                    <p><i class="fa fa-mobile"></i> (646) 861-2268
                        <span class="space"></span>
                        <i class="fa fa-envelope-o"></i> freeman@aixmail.com</p>
                    <p><i class="fa fa-location-arrow"></i> 338 West 23th Street New York, NY 10011, USA</p>
                </div>
                <div class="actions">
                    <i class="fa fa-star-o"></i>
                </div>
            </dd>

            <dd class="contact-list-item">
                <div class="avatar">
                    <img class="" width=50 height=50 src="/resources/img/avatar/depp.png" />
                </div>
                <div class="info">
                    <p><strong>Johnny Depp</strong></p>
                    <p><i class="fa fa-mobile"></i> (646) 861-2268
                        <span class="space"></span>
                        <i class="fa fa-envelope-o"></i> johnnydepp@aixmail.com</p>
                    <p><i class="fa fa-location-arrow"></i> 338 West 23th Street New York, NY 10011, USA</p>
                </div>
                <div class="actions">
                    <i class="fa fa-star-o"></i>
                </div>
            </dd>

            <dd class="contact-list-item">
                <div class="avatar">
                    <img class="" width=50 height=50 src="/resources/img/avatar/muller.png" />
                </div>
                <div class="info">
                    <p><strong>Thomas Müller</strong></p>
                    <p><i class="fa fa-mobile"></i> (646) 861-2268
                        <span class="space"></span>
                        <i class="fa fa-envelope-o"></i> muller@yahoo.com</p>
                    <p><i class="fa fa-location-arrow"></i> 338 West 23th Street New York, NY 10011, USA</p>
                </div>
                <div class="actions">
                    <i class="fa fa-star"></i>
                </div>
            </dd>
        </dl>
    </div>

</aside>

<!-- Mail content -->
<aside class="right-side x-col">

    <div class="column-header">
        <div class="pull-right">
            <div class="btn-group">
                <button type="button" class="btn btn-default btn-sm"><i class="fa fa-chevron-left"></i></button>
                <button type="button" class="btn btn-default btn-sm"><i class="fa fa-chevron-right"></i></button>
            </div>
        </div>
        <!--<h2 class="mail-title">Announcing Dedicated Node Services</h2>-->
    </div>

    <header class="toolbar">

        <button class="btn btn-default btn-sm"><i class="fa fa-arrow-left"></i> Back</button>

        <div class="btn-group">
            <button type="button" class="btn btn-default btn-sm"><i class="fa fa-pencil"></i> Edit</button>
            <button type="button" class="btn btn-default btn-sm"><i class="fa fa-eye-slash"></i> Disable</button>
            <button type="button" class="btn btn-default btn-sm"><i class="fa fa-trash"></i> Delete</button>
        </div>

        <div class="btn-group">
            <button type="button" class="btn btn-default btn-sm"><i class="fa fa-star-o"></i></button>
            <!-- <button type="button" class="btn btn-default btn-sm"><i class="fa fa-tag"></i></button> -->
        </div>

    </header>

    <div id="mailViewport" data-layout="fill-parent" style="height: 600px; overflow-y:auto; padding-bottom: 80px;">

        <article class="mail-entry">
            <div class="mail-info">
                <h3>Tom Hanks</h3>
                <p><i class="fa fa-envelope-o"></i> <span>openshift-email@redhat.com</span></p>
            </div>

            <hr/>

            <div class="mail-body">

                <form class="form-horizontal" role="form">
                    <div class="form-group">
                        <label for="" class="col-sm-3 control-label">Full Name</label>
                        <div class="col-sm-9">
                            <p class="form-control-static">Beyoncé Gisselle Knowles</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="" class="col-sm-3 control-label">Email</label>
                        <div class="col-sm-9">
                            <p class="form-control-static">beyonce@aixmail.com</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="" class="col-sm-3 control-label">Phone</label>
                        <div class="col-sm-9">
                            <p class="form-control-static">+1 202-456-1111</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="" class="col-sm-3 control-label">Address</label>
                        <div class="col-sm-9">
                            <p class="form-control-static">
                                1600 Pennsylvania Ave NW, Washington, DC</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="" class="col-sm-3 control-label">ZIP Code</label>
                        <div class="col-sm-9">
                            <p class="form-control-static">20500</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-3 col-sm-9">
                            <button type="submit" class="btn btn-primary">Save</button>
                        </div>
                    </div>
                </form>

            </div><!-- end .mail-body -->

        </article>

    </div>
</aside>
</div>

<div id="dlgProgress" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog"
     aria-labelledby="mySmallModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <!-- <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span>
          <span class="sr-only">Close</span></button> -->
                <h4 class="modal-title" id="myModalLabel">Loading</h4>
            </div>
            <div class="modal-body">
                <div class="progress auto-progress">
                    <div class="progress-bar progress-bar-success progress-bar-striped active"
                         role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                        <span class="sr-only">100% Complete (success)</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
            </div>
        </div>
    </div>
</div>

<script id="mailSummary" type="text/template">
    <% for (var i = 0; i < items.length; i++) { var item = items[i]; %>
    <dd data-messageIndex="" class="mail-list-item">
        <div class="action-controls">
            <input type="checkbox" />
            <div style="margin-top:8px;">
                <i class="fa fa-star-o"></i>
            </div>
        </div>
        <div class="writer">
            <strong><%= item.from %></strong>
            <span class="pull-right"><%=item.date%></span>
        </div>
        <h4><%= item.subject %></h4>
        <p>
        </p>
    </dd>
    <%}%>
</script>

<script src="/resources/js/jquery-2.1.1.js"></script>
<script src="/resources/js/bootstrap.js"></script>
<script src="/resources/js/underscore-min.js"></script>
<script src="/resources/js/backbone-min.js"></script>

<script>

    function adjustColumnsHeight() {
        var col_h = $('.left-side').height();

        var calc_offset = function() {
            var tb = $('.toolbar', this);
            var offset = tb.outerHeight() + tb.offset().top;
            return offset;
        }

        $('.x-col:has([data-layout])').each(function(i, n){
            var offset = calc_offset.call(this);
            var _h = col_h - offset;
            $(this).find('[data-layout=fill-parent]').css({"height": _h});
        })
    }

    function loadMailList() {
        //http://127.0.0.1:8080/inbox

        var progressDialog = $('#dlgProgress').modal();

        var ajax = $.getJSON("/inbox", function(data){
            if (data && data.messages) {
                var t = _.template($('#mailSummary').html());

                var html = t({items: data.messages});

                $('#maillist .mail-list').empty().append(html);
            }
        }).fail(function(xhr) {
            if (xhr.statusText === 'abort') {
                return; // just ignore
            }
            alert("Load mail failed, please try it later.")
        }).always(function() {
            progressDialog.modal('hide');
            progressDialog.off('hidden.bs.modal');
        });

        progressDialog.on('hidden.bs.modal', function() {
            ajax.abort();
        })
    }

    $(window).resize(function(){
        adjustColumnsHeight();
    });

    $(function(){
        adjustColumnsHeight();

        $('#maillist').on('click', '.refresh-btn', loadMailList);
    })
</script>

</body>
</html>